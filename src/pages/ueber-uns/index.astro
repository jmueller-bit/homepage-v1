---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import Section from '../../components/Section.astro';
import { getTeamMembers } from '../../lib/contentful';

const teamMembers = await getTeamMembers();
---

<BaseLayout title="Über Uns">
  <Hero
    title="Unsere <span class='hero-title-accent'>Vision</span>"
    description="Geschichte, Werte und die Menschen hinter dem Astrid Lindgren Zentrum. Werden Sie Teil unserer Gemeinschaft."
    badge="Über Uns"
    imagePlaceholder="ÜBER UNS"
  />

  <Section title="Bildung mit Herz & Verstand" variant="alt">
    <div class="grid grid-2">
      <div class="info-block" id="vision">
        <h3>Geschichte & Gründung</h3>
        <p>Das Astrid Lindgren Zentrum wurde mit der Vision gegründet, eine alternative Bildungsstätte zu schaffen, die Kinder als eigenständige Persönlichkeiten respektiert. Unsere Namensgeberin steht für Mut, Fantasie und den Glauben an die Stärke von Kindern – Werte, die wir jeden Tag leben.</p>

        <h3>Werte & Leitbild</h3>
        <ul class="value-list" style="margin-top: var(--space-4); margin-left: var(--space-4);">
          <li>Respekt vor der Individualität jedes Kindes</li>
          <li>Förderung von Selbstständigkeit und Eigenverantwortung</li>
          <li>Gemeinschaft und gegenseitige Unterstützung</li>
          <li>Nachhaltigkeit und Naturverbundenheit</li>
        </ul>
      </div>

      <div class="team-preview" id="team">
        <h3>Unser Team</h3>
        <p>Drei Säulen tragen unsere Schule: Unsere engagierten Pädagog:innen, die weitsichtige Geschäftsführung und unser fürsorgliches Team in Küche und Haushalt.</p>
        
        {teamMembers.length > 0 ? (
          <div class="team-grid" style="margin-top: var(--space-6);">
            {teamMembers.map((member) => (
              <a href={`/team/${member.name.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '')}`} class="team-card">
                {member.photo ? (
                  <div class="team-photo">
                    <img src={member.photo.url} alt={member.name} loading="lazy" />
                  </div>
                ) : (
                  <div class="team-photo-placeholder">
                    <span>{member.name.charAt(0)}</span>
                  </div>
                )}
                <div class="team-info">
                  <h4 class="team-name">{member.name}</h4>
                  <p class="team-role">{member.role}</p>
                  {member.bio && <p class="team-bio">{member.bio}</p>}
                </div>
              </a>
            ))}
          </div>
        ) : (
          <div class="hero-actions" style="margin-top: var(--space-6);">
            <a href="/kontakt" class="btn btn-outline">Team kennenlernen</a>
          </div>
        )}
      </div>
    </div>
  </Section>
</BaseLayout>

<style>
  .team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .team-card {
    background: white;
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
    text-decoration: none;
  }

  .team-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }

  .team-photo {
    width: 100%;
    aspect-ratio: 1;
    overflow: hidden;
    background: var(--color-gray-200);
  }

  .team-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .team-photo-placeholder {
    width: 100%;
    aspect-ratio: 1;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-hover) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    font-weight: bold;
    color: white;
  }

  .team-info {
    padding: 1rem;
  }

  .team-name {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: var(--color-gray-700);
  }

  .team-role {
    font-size: 0.875rem;
    color: var(--color-primary);
    font-weight: 500;
    margin-bottom: 0.5rem;
  }

  .team-bio {
    font-size: 0.875rem;
    color: var(--color-gray-500);
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
